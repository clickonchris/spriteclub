<h1><%= @contestant.name %></h1>

<h2>Record: <%=@wins.round %>-<%=@losses.round%>-<%=@ties.round %> (W/L Ratio: <%='%.1f' % (@wlRatio*100)%>% ) </h2>

<div class="gender<%=@contestant.gender%>" style="display:inline-block;padding:5px;">
<%= image_tag @contestant.photo.url :medium %>
</div>
<% if @pending_contests.length > 0 %>
	<h2>Pending Contests</h2>
	<% for contest in @pending_contests %>
	<a href="<%=url_for :controller=>'contests',:action=>'show',:id=>contest.id  %>">
	<%=contest.name %>:	<%=@contestant.name %> vs.
		<% for c in contest.contestants %>
			<% if c != @contestant %>
				<%=c.name %>
			<% end%>
		<% end %>
	</a>
	 <br/>
	<% end %>
<% end %>

<% if @active_contests.length >0 %>
	<h2>Active Contests</h2>
	<% for contest in @active_contests %>
	<a href="<%=url_for :controller=>'contests',:action=>'show',:id=>contest.id  %>">
	<%=contest.name %>:	<%=@contestant.name %> vs.
		<% for c in contest.contestants %>
			<% if c != @contestant %>
				<%=c.name %>
			<% end%>
		<% end %>
	</a>
	 <br/>
	<% end %>
<% end %>
	 
<h2>Recently Finished Contests</h2>
<% for contest in @recent_contests %>
<a href="<%=url_for :controller=>'contests',:action=>'show',:id=>contest.id  %>"><%=contest.name %></a>: 
	<% if contest.is_a_tie %>
		Tie
	<% elsif contest.winner != nil && contest.winner.id == @contestant.id %>
		<span style="font-weight:bold;">WON!</span>
	<% else%>
		Lost
	<% end %>
	<%# This is inefficiently causing extra queries to be executed and should probably get refactored #%>
	Votes:
	<%=@contestant.votes_for_contest(contest.id) %> to
	<% contest.contestants.each do |c| %>
		<% if c.id != @contestant.id %>
			<%=c.votes_for_contest(contest.id) %>
		<% end %>
	<% end %>
 <br/>
<% end %>

<br/>
<%= link_to 'Back', contests_path %>


